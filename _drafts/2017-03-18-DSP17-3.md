---
layout: post
title: "DSP-17 #3: Writing kernel modules for Linux"
author: Stan Drozd
date: 2017-03-18 10:00:00 +0100
categories: dsp17
excerpt: "I failed to think of a penguin metaphore this time"
tags: dsp17 tutorial kernel modules c compilation
---
Another thing that I [mentioned][dsp-1] before was that 
* Introduction
* Toy metaphore

# Prerequisites
* **A (virtual) machine running Linux** - Compiling against the running kernel
  is the easiest (and a bit risky) way to start, but our module is hard to go
  wrong with; I'll present you with three ways to compile a kernel module
* **Basic understanding of C and simple GNU Makefiles** - There's finally gonna
  be C code involved; to build our module we'll harness the power of kbuild
  Makefiles

# Coding style
* 8 space tabs (and how `vim-sleuth` can help)

# Example module
* Code snippet

```c
#include <linux/module.h>
#include <linux/kernel.h> /* For KERN_INFO */

int hello_init(void)
{
        printk(KERN_INFO "Hello, world!\n");

        return 0;
}

void hello_exit(void)
{
        printk(KERN_INFO "Goodbye, world!\n");

        return;
}

module_init(hello_init);
module_exit(hello_exit);

MODULE_DESCRIPTION("My \"Hello, World!\" module");
MODULE_AUTHOR("Stan Drozd <drozdziak1@gmail.com>");
MODULE_LICENSE("GPL");

```

* Which part does what


# In-tree build

# Out-of-tree build (against the running kernel?)

# Lodaing and unloading of kernel modules

# Further reading
* [Documentation/process/coding-style.rst][coding-style] - The full kernel
  coding style documentation
* [Documentation/kbuild/modules.txt][kbuild-modules] - More on kernel modules

[coding-style]:http://lxr.free-electrons.com/source/Documentation/process/coding-style.rst
[dsp-1]:{% post_url 2017-03-02-DSP17-1-the-kernel-role-in-OS %}
[kbuild-modules]:http://lxr.free-electrons.com/source/Documentation/kbuild/modules.txt
